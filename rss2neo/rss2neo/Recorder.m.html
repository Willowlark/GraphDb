<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>rss2neo.Recorder API documentation</title>
    <meta name="description" content="This module is used to interact with a neo4j DB. It records information given to it
into the DB, hen..." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>


  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#rss2neo.Recorder.Recorder">Recorder</a></span>
        
          
  <ul>
    <li class="mono"><a href="#rss2neo.Recorder.Recorder.add_record">add_record</a></li>
    <li class="mono"><a href="#rss2neo.Recorder.Recorder.get_or_add_topics">get_or_add_topics</a></li>
    <li class="mono"><a href="#rss2neo.Recorder.Recorder.has_record">has_record</a></li>
    <li class="mono"><a href="#rss2neo.Recorder.Recorder.initialize">initialize</a></li>
    <li class="mono"><a href="#rss2neo.Recorder.Recorder.push">push</a></li>
    <li class="mono"><a href="#rss2neo.Recorder.Recorder.relate">relate</a></li>
    <li class="mono"><a href="#rss2neo.Recorder.Recorder.relate_then_push">relate_then_push</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">rss2neo.Recorder</span> module</h1>
  <p>This module is used to interact with a neo4j DB. It records information given to it
into the DB, hence the name. It operates as a Class and uses py2neo to turn information
into graph objects.</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-rss2neo.Recorder', this);">Show source &equiv;</a></p>
  <div id="source-rss2neo.Recorder" class="source">
    <pre><code>"""
This module is used to interact with a neo4j DB. It records information given to it
into the DB, hence the name. It operates as a Class and uses py2neo to turn information
into graph objects. 
"""

from py2neo import Graph
from py2neo import Node
from py2neo import Relationship


class Recorder:
    """
    `Author`: Bill Clark

    A module to handle the neo4j interactions in Grapher. Methods are specific to
    that class, but are basic enough to be reused easily. Most return subgraphs.

    `graph`: The global for the graph to connect to.

    `immediate_mode`: A flag that can be set to 1) prevent the adding methods from adding
    to the graph, limiting them to only returning the created node; and 2) require a user
    input for push operation. For safety mostly, unlikely needed.
    """
    graph = None
    immediate_mode = True  # Bit slower, but eliminates duplicates in the same article.
    confirm_mode = False

    def initialize(self, graph_address):
        """
        `Author`: Bill Clark

        Connects to a graph for operations. Required before anything else.

        `graph_address`: web address of neo4j instance.
        """
        self.graph = Graph(self, graph_address)

    def _subgraphify(self, graph_list):
        """
        `Author`: Bill Clark

        Converts a list of py2neo objects into a py2neo subgraph.

        `graph_list`: A list of nodes, relationships, or subgraphs.

        `return`: the subgraph made from the list elements.
        """
        base = graph_list.pop(0)
        for graph in graph_list:
            base = base | graph
        return base

    def _add_topics(self, topic_candidates):
        """
        `Author`: Bill Clark

        Adds a list of topics to the graph as new nodes. This doesn't check if the node
        already exists; use get_or_add_topics for that. The nodes are returned regardless,
        but are only pushed if immediate_mode is off.

        `topics`: A list of string Topics to be added. The string value will be the name
        property of the node, while the label will be Topic.

        `return`: a subgraph containing all the new nodes.
        """
        listing = []
        for topic in topic_candidates:
            n = Node("Topic", **topic.keywordify())
            if self.immediate_mode: self.graph.create(n)
            listing.append(n)
        return self._subgraphify(listing)

    def _fetch_topics(self, topic_candidates):
        """
        `Author`: Bill Clark

        Retrieves topics from the graph. Assumes the topics are in the graph, use has_topic
        beforehand. Takes the first found instance, but names should be singleton anyway.

        `topic_candidates`: List of string topic names to retrieve.

        `return`: subgraph of the topics retrieved.
        """
        listing = []
        for topic in topic_candidates:
            match = self.graph.find_one("Topic", property_key='name', property_value=topic.title)
            if not match: return False # Not in the DB
            listing.append(topic.update_node(match))
        return self._subgraphify(listing)

    def get_or_add_topics(self, topic_candidates):
        """
        `Author`: Bill Clark

        Control method. This method takes each topic given and either creates it if it
        doesn't exist or retrieves it if it does not. This should be used over the
        individual add and fetch operations.

        `topic_candidates`: List of topic strings to be added or retrieved. The value of the string
        is the name property of the node.

        `return`: a subgraph of the fetched and added nodes.
        """
        listing = []
        for topic in topic_candidates:
            fetch = self._fetch_topics([topic])
            if not fetch:
                fetch = self._add_topics([topic])
            listing.append(fetch)
        return self._subgraphify(listing)

    def add_record(self, data):
        """
        `Author`: Bill Clark

        Adds a node in the same manner as add topic. This does not accommodate lists.
        This is used for adding records, made separate so Topics can be expanded on.
        Will not add to the graph if confirm mode is off, only return the created node.

        `data`: The data to store in the content field of the node.

        `return`: the node created.
        """
        if self.has_record(data): return False
        n = Node("Record", content=data)
        if self.immediate_mode: self.graph.create(n)
        return n

    def has_record(self, data):
        """
        `Author`: Bill Clark
        
        Checks if a record with content field data is in the database. If it is found,
        we return True. If it's not found, we return false. 
        
        `data`: The value in the content field to check against.
        
        `return`: Boolean True or False
        """
        if self.graph.find_one("Record", property_key="content", property_value=data):
            return True
        else: return False

    def relate_then_push(self, topic_subgraph, record_node):
        """
        `Author`: Bill Clark

        Control method. This method streamlines relation into a push. calls push
        with the result of the relation.

        `topic_subgraph`: A subgraph containing topic nodes to be related to the record.

        `record_node`: A node to relate to each topic in the topic_subgraph.
        """
        related = self.relate(topic_subgraph, record_node)
        self.push(related)

    def relate(self, topic_subgraph, record_node):
        """
        `Author`: Bill Clark

        Takes a subgraph of topics and relates them to a singular record. Will be
        modified, eventually.

        `topic_subgraph`: A subgraph containing topic nodes to be related to the record.

        `record_node`: A node to relate to each topic in the topic_subgraph.

        `return`: A subgraph containing the record, the topic_subgraph, and the new
        relationships.
        """
        listing = []
        for node in topic_subgraph.nodes():
            listing.append(Relationship(record_node, 'Related', node, weight=node['strength']))
            del node['strength']  # We use the node to carry the weight, not store it.
        return self._subgraphify(listing) | record_node

    def push(self, subgraph):
        """
        `Author`: Bill Clark

        Pushes changes to the graph database, as well as creates any new nodes in the
        subgraph. Contains a user input check mode only activated when the confirm_mode
        flag is true.

        `subgraph`: The subgraph to update and create.

        `return`: -1 on a failure, else None.
        """
        if self.confirm_mode:
            print subgraph
            if raw_input("Confirm with y: ") != "y":
                return -1
        self.graph.push(subgraph)
        self.graph.create(subgraph)

if __name__ == "__main__":
    rec = Recorder()
    rec.initialize('http://localhost:7474/db/data/')
</code></pre>
  </div>

  </header>

  <section id="section-items">


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="rss2neo.Recorder.Recorder" class="name">class <span class="ident">Recorder</span></p>
      
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>A module to handle the neo4j interactions in Grapher. Methods are specific to
that class, but are basic enough to be reused easily. Most return subgraphs.</p>
<p><code>graph</code>: The global for the graph to connect to.</p>
<p><code>immediate_mode</code>: A flag that can be set to 1) prevent the adding methods from adding
to the graph, limiting them to only returning the created node; and 2) require a user
input for push operation. For safety mostly, unlikely needed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-rss2neo.Recorder.Recorder', this);">Show source &equiv;</a></p>
  <div id="source-rss2neo.Recorder.Recorder" class="source">
    <pre><code>class Recorder:
    """
    `Author`: Bill Clark

    A module to handle the neo4j interactions in Grapher. Methods are specific to
    that class, but are basic enough to be reused easily. Most return subgraphs.

    `graph`: The global for the graph to connect to.

    `immediate_mode`: A flag that can be set to 1) prevent the adding methods from adding
    to the graph, limiting them to only returning the created node; and 2) require a user
    input for push operation. For safety mostly, unlikely needed.
    """
    graph = None
    immediate_mode = True  # Bit slower, but eliminates duplicates in the same article.
    confirm_mode = False

    def initialize(self, graph_address):
        """
        `Author`: Bill Clark

        Connects to a graph for operations. Required before anything else.

        `graph_address`: web address of neo4j instance.
        """
        self.graph = Graph(self, graph_address)

    def _subgraphify(self, graph_list):
        """
        `Author`: Bill Clark

        Converts a list of py2neo objects into a py2neo subgraph.

        `graph_list`: A list of nodes, relationships, or subgraphs.

        `return`: the subgraph made from the list elements.
        """
        base = graph_list.pop(0)
        for graph in graph_list:
            base = base | graph
        return base

    def _add_topics(self, topic_candidates):
        """
        `Author`: Bill Clark

        Adds a list of topics to the graph as new nodes. This doesn't check if the node
        already exists; use get_or_add_topics for that. The nodes are returned regardless,
        but are only pushed if immediate_mode is off.

        `topics`: A list of string Topics to be added. The string value will be the name
        property of the node, while the label will be Topic.

        `return`: a subgraph containing all the new nodes.
        """
        listing = []
        for topic in topic_candidates:
            n = Node("Topic", **topic.keywordify())
            if self.immediate_mode: self.graph.create(n)
            listing.append(n)
        return self._subgraphify(listing)

    def _fetch_topics(self, topic_candidates):
        """
        `Author`: Bill Clark

        Retrieves topics from the graph. Assumes the topics are in the graph, use has_topic
        beforehand. Takes the first found instance, but names should be singleton anyway.

        `topic_candidates`: List of string topic names to retrieve.

        `return`: subgraph of the topics retrieved.
        """
        listing = []
        for topic in topic_candidates:
            match = self.graph.find_one("Topic", property_key='name', property_value=topic.title)
            if not match: return False # Not in the DB
            listing.append(topic.update_node(match))
        return self._subgraphify(listing)

    def get_or_add_topics(self, topic_candidates):
        """
        `Author`: Bill Clark

        Control method. This method takes each topic given and either creates it if it
        doesn't exist or retrieves it if it does not. This should be used over the
        individual add and fetch operations.

        `topic_candidates`: List of topic strings to be added or retrieved. The value of the string
        is the name property of the node.

        `return`: a subgraph of the fetched and added nodes.
        """
        listing = []
        for topic in topic_candidates:
            fetch = self._fetch_topics([topic])
            if not fetch:
                fetch = self._add_topics([topic])
            listing.append(fetch)
        return self._subgraphify(listing)

    def add_record(self, data):
        """
        `Author`: Bill Clark

        Adds a node in the same manner as add topic. This does not accommodate lists.
        This is used for adding records, made separate so Topics can be expanded on.
        Will not add to the graph if confirm mode is off, only return the created node.

        `data`: The data to store in the content field of the node.

        `return`: the node created.
        """
        if self.has_record(data): return False
        n = Node("Record", content=data)
        if self.immediate_mode: self.graph.create(n)
        return n

    def has_record(self, data):
        """
        `Author`: Bill Clark
        
        Checks if a record with content field data is in the database. If it is found,
        we return True. If it's not found, we return false. 
        
        `data`: The value in the content field to check against.
        
        `return`: Boolean True or False
        """
        if self.graph.find_one("Record", property_key="content", property_value=data):
            return True
        else: return False

    def relate_then_push(self, topic_subgraph, record_node):
        """
        `Author`: Bill Clark

        Control method. This method streamlines relation into a push. calls push
        with the result of the relation.

        `topic_subgraph`: A subgraph containing topic nodes to be related to the record.

        `record_node`: A node to relate to each topic in the topic_subgraph.
        """
        related = self.relate(topic_subgraph, record_node)
        self.push(related)

    def relate(self, topic_subgraph, record_node):
        """
        `Author`: Bill Clark

        Takes a subgraph of topics and relates them to a singular record. Will be
        modified, eventually.

        `topic_subgraph`: A subgraph containing topic nodes to be related to the record.

        `record_node`: A node to relate to each topic in the topic_subgraph.

        `return`: A subgraph containing the record, the topic_subgraph, and the new
        relationships.
        """
        listing = []
        for node in topic_subgraph.nodes():
            listing.append(Relationship(record_node, 'Related', node, weight=node['strength']))
            del node['strength']  # We use the node to carry the weight, not store it.
        return self._subgraphify(listing) | record_node

    def push(self, subgraph):
        """
        `Author`: Bill Clark

        Pushes changes to the graph database, as well as creates any new nodes in the
        subgraph. Contains a user input check mode only activated when the confirm_mode
        flag is true.

        `subgraph`: The subgraph to update and create.

        `return`: -1 on a failure, else None.
        """
        if self.confirm_mode:
            print subgraph
            if raw_input("Confirm with y: ") != "y":
                return -1
        self.graph.push(subgraph)
        self.graph.create(subgraph)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#rss2neo.Recorder.Recorder">Recorder</a></li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="rss2neo.Recorder.Recorder.confirm_mode" class="name">var <span class="ident">confirm_mode</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="rss2neo.Recorder.Recorder.graph" class="name">var <span class="ident">graph</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="rss2neo.Recorder.Recorder.immediate_mode" class="name">var <span class="ident">immediate_mode</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="rss2neo.Recorder.Recorder.add_record">
    <p>def <span class="ident">add_record</span>(</p><p>self, data)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>Adds a node in the same manner as add topic. This does not accommodate lists.
This is used for adding records, made separate so Topics can be expanded on.
Will not add to the graph if confirm mode is off, only return the created node.</p>
<p><code>data</code>: The data to store in the content field of the node.</p>
<p><code>return</code>: the node created.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-rss2neo.Recorder.Recorder.add_record', this);">Show source &equiv;</a></p>
  <div id="source-rss2neo.Recorder.Recorder.add_record" class="source">
    <pre><code>def add_record(self, data):
    """
    `Author`: Bill Clark
    Adds a node in the same manner as add topic. This does not accommodate lists.
    This is used for adding records, made separate so Topics can be expanded on.
    Will not add to the graph if confirm mode is off, only return the created node.
    `data`: The data to store in the content field of the node.
    `return`: the node created.
    """
    if self.has_record(data): return False
    n = Node("Record", content=data)
    if self.immediate_mode: self.graph.create(n)
    return n
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="rss2neo.Recorder.Recorder.get_or_add_topics">
    <p>def <span class="ident">get_or_add_topics</span>(</p><p>self, topic_candidates)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>Control method. This method takes each topic given and either creates it if it
doesn't exist or retrieves it if it does not. This should be used over the
individual add and fetch operations.</p>
<p><code>topic_candidates</code>: List of topic strings to be added or retrieved. The value of the string
is the name property of the node.</p>
<p><code>return</code>: a subgraph of the fetched and added nodes.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-rss2neo.Recorder.Recorder.get_or_add_topics', this);">Show source &equiv;</a></p>
  <div id="source-rss2neo.Recorder.Recorder.get_or_add_topics" class="source">
    <pre><code>def get_or_add_topics(self, topic_candidates):
    """
    `Author`: Bill Clark
    Control method. This method takes each topic given and either creates it if it
    doesn't exist or retrieves it if it does not. This should be used over the
    individual add and fetch operations.
    `topic_candidates`: List of topic strings to be added or retrieved. The value of the string
    is the name property of the node.
    `return`: a subgraph of the fetched and added nodes.
    """
    listing = []
    for topic in topic_candidates:
        fetch = self._fetch_topics([topic])
        if not fetch:
            fetch = self._add_topics([topic])
        listing.append(fetch)
    return self._subgraphify(listing)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="rss2neo.Recorder.Recorder.has_record">
    <p>def <span class="ident">has_record</span>(</p><p>self, data)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>Checks if a record with content field data is in the database. If it is found,
we return True. If it's not found, we return false. </p>
<p><code>data</code>: The value in the content field to check against.</p>
<p><code>return</code>: Boolean True or False</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-rss2neo.Recorder.Recorder.has_record', this);">Show source &equiv;</a></p>
  <div id="source-rss2neo.Recorder.Recorder.has_record" class="source">
    <pre><code>def has_record(self, data):
    """
    `Author`: Bill Clark
    
    Checks if a record with content field data is in the database. If it is found,
    we return True. If it's not found, we return false. 
    
    `data`: The value in the content field to check against.
    
    `return`: Boolean True or False
    """
    if self.graph.find_one("Record", property_key="content", property_value=data):
        return True
    else: return False
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="rss2neo.Recorder.Recorder.initialize">
    <p>def <span class="ident">initialize</span>(</p><p>self, graph_address)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>Connects to a graph for operations. Required before anything else.</p>
<p><code>graph_address</code>: web address of neo4j instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-rss2neo.Recorder.Recorder.initialize', this);">Show source &equiv;</a></p>
  <div id="source-rss2neo.Recorder.Recorder.initialize" class="source">
    <pre><code>def initialize(self, graph_address):
    """
    `Author`: Bill Clark
    Connects to a graph for operations. Required before anything else.
    `graph_address`: web address of neo4j instance.
    """
    self.graph = Graph(self, graph_address)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="rss2neo.Recorder.Recorder.push">
    <p>def <span class="ident">push</span>(</p><p>self, subgraph)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>Pushes changes to the graph database, as well as creates any new nodes in the
subgraph. Contains a user input check mode only activated when the confirm_mode
flag is true.</p>
<p><code>subgraph</code>: The subgraph to update and create.</p>
<p><code>return</code>: -1 on a failure, else None.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-rss2neo.Recorder.Recorder.push', this);">Show source &equiv;</a></p>
  <div id="source-rss2neo.Recorder.Recorder.push" class="source">
    <pre><code>def push(self, subgraph):
    """
    `Author`: Bill Clark
    Pushes changes to the graph database, as well as creates any new nodes in the
    subgraph. Contains a user input check mode only activated when the confirm_mode
    flag is true.
    `subgraph`: The subgraph to update and create.
    `return`: -1 on a failure, else None.
    """
    if self.confirm_mode:
        print subgraph
        if raw_input("Confirm with y: ") != "y":
            return -1
    self.graph.push(subgraph)
    self.graph.create(subgraph)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="rss2neo.Recorder.Recorder.relate">
    <p>def <span class="ident">relate</span>(</p><p>self, topic_subgraph, record_node)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>Takes a subgraph of topics and relates them to a singular record. Will be
modified, eventually.</p>
<p><code>topic_subgraph</code>: A subgraph containing topic nodes to be related to the record.</p>
<p><code>record_node</code>: A node to relate to each topic in the topic_subgraph.</p>
<p><code>return</code>: A subgraph containing the record, the topic_subgraph, and the new
relationships.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-rss2neo.Recorder.Recorder.relate', this);">Show source &equiv;</a></p>
  <div id="source-rss2neo.Recorder.Recorder.relate" class="source">
    <pre><code>def relate(self, topic_subgraph, record_node):
    """
    `Author`: Bill Clark
    Takes a subgraph of topics and relates them to a singular record. Will be
    modified, eventually.
    `topic_subgraph`: A subgraph containing topic nodes to be related to the record.
    `record_node`: A node to relate to each topic in the topic_subgraph.
    `return`: A subgraph containing the record, the topic_subgraph, and the new
    relationships.
    """
    listing = []
    for node in topic_subgraph.nodes():
        listing.append(Relationship(record_node, 'Related', node, weight=node['strength']))
        del node['strength']  # We use the node to carry the weight, not store it.
    return self._subgraphify(listing) | record_node
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="rss2neo.Recorder.Recorder.relate_then_push">
    <p>def <span class="ident">relate_then_push</span>(</p><p>self, topic_subgraph, record_node)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>Control method. This method streamlines relation into a push. calls push
with the result of the relation.</p>
<p><code>topic_subgraph</code>: A subgraph containing topic nodes to be related to the record.</p>
<p><code>record_node</code>: A node to relate to each topic in the topic_subgraph.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-rss2neo.Recorder.Recorder.relate_then_push', this);">Show source &equiv;</a></p>
  <div id="source-rss2neo.Recorder.Recorder.relate_then_push" class="source">
    <pre><code>def relate_then_push(self, topic_subgraph, record_node):
    """
    `Author`: Bill Clark
    Control method. This method streamlines relation into a push. calls push
    with the result of the relation.
    `topic_subgraph`: A subgraph containing topic nodes to be related to the record.
    `record_node`: A node to relate to each topic in the topic_subgraph.
    """
    related = self.relate(topic_subgraph, record_node)
    self.push(related)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
